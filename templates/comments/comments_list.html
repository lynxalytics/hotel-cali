{% extends 'base.html' %}

{% block content%}

<div class="d-flex flex-row justify-content-start">
    <h1 class="flex-fill">Comments</h3>
    {% if user.is_authenticated %}
    <a class="btn btn-outline-success d-flex flex-row align-items-center justify-content-between mr-3 p-2" href="{% url 'comment-create' %}">
         Add
    </a>
    {% endif %}
</div>

{% if comments %}
{% for comment in comments %}
<div class="card m-3">
    <div class="card-body d-flex flex-row justify-content-between p-2">
        <div class="flex-fill mb-0 mx-2">
            <div class="mb-2">
                <p>{{ comment.text }}</p>
            </div>

            <div class="d-flex flex-row align-items-end justify-content-end">
                <p class="font-weight-light align-items-left">{{comment.created_by.username}}@{{comment.created_at}}</p>
            </div>
        </div>
        {% if user.is_authenticated and user == comment.created_by %}
        <div class="d-flex flex-column align-items-center justify-content-center">
            <a class="btn btn-outline-warning mb-2" href="{% url 'comment-update' pk=comment.pk %}">Update</a>
            <a class="btn btn-outline-danger w-100" href="{% url 'comment-delete' pk=comment.pk %}">Delete</a>
        </div>
        {% endif %}
    </div>
</div>
{% endfor %}

{% else %}

<p>There are no comments in the Guestbook.</p>

{% endif %}

{% if is_paginated %}
<nav class="d-flex justify-content-center" aria-label="Page navigation">
    <ul class="pagination">
        {% if page_obj.has_previous %}
        <li class="page-item">
            <a class="page-link" href="{{ request.path }}?page={{ page_obj.previous_page_number }}">Previous</a>
        </li>
        {% endif %}
        <li class="page-item">
            <a class="page-link" href="">{{ page_obj.number }}</a>
        </li>
        {% if page_obj.has_next %}
        <li class="page-item">
            <a class="page-link" href="{{ request.path }}?page={{ page_obj.next_page_number }}">Next</a>
        </li>
        {% endif %}
    </ul>
</nav>
{% endif %}

{% endblock %}